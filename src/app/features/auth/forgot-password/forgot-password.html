<div class="auth-container">
  
  <!-- Botón Volver al Home -->
  <a routerLink="/home" class="back-to-home" title="Volver al Home">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  </a>

  <div class="auth-card">
    
    <!-- Logo -->
    <div class="auth-logo">
      <span class="logo-text">Haida</span>
      <span class="logo-subtext">Inversiones Llantas</span>
    </div>

    <!-- Contenido si NO se envió el email -->
    <div *ngIf="!emailSent">
      <!-- Título -->
      <h1 class="auth-title">¿Olvidaste tu contraseña?</h1>
      <p class="auth-subtitle">Ingresa tu email y te enviaremos instrucciones para restablecer tu contraseña</p>

      <!-- Formulario -->
      <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()" class="auth-form">
        
        <!-- Email -->
        <div class="form-group">
          <label for="email">Email</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <input 
              type="email" 
              id="email"
              formControlName="email"
              class="form-control"
              [class.is-invalid]="email?.invalid && email?.touched"
              placeholder="tu@email.com">
          </div>
          <div class="invalid-feedback" *ngIf="email?.invalid && email?.touched">
            <span *ngIf="email?.errors?.['required']">El email es requerido</span>
            <span *ngIf="email?.errors?.['email']">Email inválido</span>
          </div>
        </div>

        <!-- Botón Submit -->
        <button 
          type="submit" 
          class="btn btn-primary btn-block btn-lg"
          [class.loading]="isLoading"
          [disabled]="isLoading">
          <span *ngIf="!isLoading">Enviar Instrucciones</span>
          <span *ngIf="isLoading">Enviando...</span>
        </button>
      </form>
    </div>

    <!-- Contenido si SE envió el email -->
    <div *ngIf="emailSent" class="success-message">
      <div class="success-icon">
        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
      </div>
      
      <h2>¡Email Enviado!</h2>
      <p>Hemos enviado las instrucciones para restablecer tu contraseña a <strong>{{ email?.value }}</strong></p>
      <p class="text-muted">Si no ves el email, revisa tu carpeta de spam.</p>

      <button type="button" class="btn btn-primary btn-block btn-lg" (click)="backToLogin()">
        Volver al Login
      </button>
    </div>

    <!-- Footer -->
    <div class="auth-footer">
      <p><a routerLink="/login">← Volver al inicio de sesión</a></p>
    </div>

  </div>
</div>
